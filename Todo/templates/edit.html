{% extends "base.html" %}

{% block title %} Home - Edit List {% endblock %}

{% block content %}

<main class="container py-5 pt-5 mt-5">
        <div class="card shadow-sm">
            <div class="card-body">
                {% if list.is_empty() %}
                    <p class="lead text-muted text-center mb-0">
                        List is empty. Add Items!!
                    </p>
                {% else %}
                    {% for id_status, task in list.list.items() %}
                        {% with task_id = list.get_id_by_status_id(id_status) %}
                            <ul class="list-group">
                                <li class="list-group-item">
                                        {% if list.get_status_by_task_id(task_id) %}
                                            <div class="d-flex align-items-center gap-2">
                                                <label class="m-0">
                                                    <span class="fs-5 text-secondary task-done">{{task}}</span>
                                                </label>
                                                <form action="{{ url_for('existing_task_undone', task_id=task_id, id_=id_) }}" method="post">
                                                    <button type="submit" class="btn btn-success">↶</button>
                                                </form>
                                                <form action="{{ url_for('existing_task_remove', task_id=task_id, id_=id_) }}" method="post">
                                                       <button type="submit" class="btn btn-danger">🗑️</button>
                                                </form>
                                            </div>
                                        {% else %}
                                            <div class="d-flex align-items-center gap-2">
                                                <label class="m-0">
                                                    <span class="fs-5 text-secondary">{{task}}</span>
                                                </label>
                                                 <form action="{{ url_for('existing_task_done', task_id=task_id, id_=id_) }}" method="post">
                                                    <button type="submit" class="btn btn-success">✔</button>
                                                 </form>
                                                   <form action="{{ url_for('existing_task_remove', task_id=task_id, id_=id_) }}" method="post">
                                                       <button type="submit" class="btn btn-danger">🗑️</button>
                                                    </form>
                                             </div>
                                        {% endif %}
                                    <br>
                                </li>
                            </ul>
                        {% endwith %}
                    {% endfor %}
                {% endif %}
                <br>
                <br>
            </div>
        </div>
        <form action="{{ url_for('add_existing', id_=id_) }}" method="post" class="mt-4 d-flex gap-2">
            <label for="item" id="item">
                <input type="text" class="form-control border-primary shadow-sm" placeholder="Task" name="task">
            </label>
            <button type="submit" class="btn btn-outline-primary"> Add </button>
        </form>
        <br>
        <br>
    <form action="/save-existing" method="post">
        <button type="submit" class="btn btn-outline-secondary">Save</button>
    </form>
</main>

{% endblock %}